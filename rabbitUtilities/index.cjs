/*! For license information please see index.cjs.LICENSE.txt */
(()=>{"use strict";var e={133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={ConsoleMessage:"c0b744d9-21ef-4dd9-aca1-47e4a5d663be",JsonMessage:"3a5d747e-274d-49ba-88c0-03a6f5268737"}},401:(e,t)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}function i(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function u(e,t){return e.get(a(e,t))}function c(e,t,n){return e.set(a(e,t),n),n}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=new WeakMap,l=new WeakMap,s=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,f,void 0),i(this,l,void 0),c(f,this,t),c(l,this,n)},t=[{key:"log",value:function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Array.isArray(arguments)&&arguments.length>0?(t=console).error.apply(t,["!!!! ".concat(u(f,this)," FOR SERVICE: ").concat(u(l,this),": ").concat(e)].concat(Array.prototype.slice.call(arguments))):console.error("!!!! ".concat(u(f,this)," FOR SERVICE: ").concat(u(l,this),": ").concat(e)):console.log("!!!! ".concat(u(f,this)," FOR SERVICE: ").concat(u(l,this),": ").concat(e))}}],t&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();t.default=s},522:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(911)),o=u(n(133)),i=n(903);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var l=function(){return e=function e(t,n,u,c,a,f,l,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.messageId=null!=n?n:(0,i.v4)(),this.createdTimeStamp=null!=u?u:Date.UTC(),Object.values(r.default).includes(c)?this.logLevel=c:this.invalidLogLevel(c),Object.values(o.default).includes(a)?this.category=a:this.invalidLogLevel(c),this.message=f,this.publishingService=l,this.consumingService=s},(t=[{key:"invalidLogLevel",value:function(e){throw Error("###".concat(Date.UTC(),"### Invalid Log Level Passed to LogMessage.  LogLevel: ").concat(e,"; MessageId: ").concat(this.messageId,", Publishing Service: ").concat(this.publishingService,";"))}},{key:"toJson",value:function(){var e={id:this.id,messageId:this.messageId,createdTimeStamp:this.createdTimeStamp,logLevel:this.logLevel,category:this.category,message:this.message,publishingService:this.publishingService,consumingService:this.consumingService};return JSON.stringify(e)}},{key:"toLogTableInsert",value:function(){var e={id:this.id,message_id:this.messageId,created_time_stamp:this.createdTimeStamp,level:this.logLevel,category:this.category,message:this.message,publishing_service_name:this.publishingService,consuming_service_name:this.consumingService};return JSON.stringify(e)}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();t.default=l},546:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(942));function i(e){return e&&e.__esModule?e:{default:e}}function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof f?r:f,l=Object.create(u.prototype);return c(l,"_invoke",function(n,r,o){var i,u,c,f=0,l=o||[],s=!1,p={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return i=t,u=0,c=e,p.n=n,a}};function y(n,r){for(u=n,c=r,t=0;!s&&f&&!o&&t<l.length;t++){var o,i=l[t],y=p.p,v=i[2];n>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=y&&((o=n<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,u=0))}if(o||n>1)return a;throw s=!0,r}return function(o,l,v){if(f>1)throw TypeError("Generator is already running");for(s&&1===l&&y(l,v),u=l,c=v;(t=u<2?e:c)||!s;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=i.return)&&t.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((t=(s=p.n<0)?c:n.call(r,p))!==a)break}catch(t){i=e,u=1,c=t}finally{f=1}}return{value:t,done:s}}}(n,o,i),!0),l}var a={};function f(){}function l(){}function s(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(c(t={},r,function(){return this}),t),y=s.prototype=f.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,c(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e}return l.prototype=s,c(y,"constructor",s),c(s,"constructor",l),l.displayName="GeneratorFunction",c(s,o,"GeneratorFunction"),c(y),c(y,o,"Generator"),c(y,r,function(){return this}),c(y,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:v}})()}function c(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){c(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},c(e,t,n,r)}function a(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,c,"next",e)}function c(e){a(i,r,o,u,c,"throw",e)}u(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var b=function(e){function t(e,n,o,i){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=function(e,t,n){return t=y(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}(this,t,["RABBITMQ SUBSCRIPTION SERVICE - MESSAGE: ",i])).rabbitUrl=e,u.serviceName=i,u.exchangeName=n,u.queueName=o,u.connection=null,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,i=[{key:"endConnection",value:(a=f(u().m(function e(t){return u().w(function(e){for(;;)switch(e.n){case 0:setTimeout(function(){t.close(),process.exit(0)},500);case 1:return e.a(2)}},e)})),function(e){return a.apply(this,arguments)})},{key:"connect",value:(c=f(u().m(function e(t){var n,r=this;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,this.log("subscription attempting to start; exchange=".concat(this.exchangeName,", queue=").concat(this.queueName)),e.n=1,o.default.connect(this.rabbitUrl);case 1:this.connection=e.v,this.log("Creating channel"),this.connection.createChannel().then(function(e){r.log("Assert Queue"),e.assertQueue(r.queueName,{durable:!0},function(e){r.log("Queue Assertion "),e&&r.log("ERROR ON QUEUE",!0,e)}),r.log("SETTING UP CONSUMER:",r.queueName),e.consume(r.queueName,t,{noAck:!0}),r.log("subscription complete - exchange=".concat(r.exchangeName,", queue=").concat(r.queueName))}),e.n=3;break;case 2:e.p=2,n=e.v,this.log("ERROR connecting to RabbitMQ:",!0,n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return c.apply(this,arguments)})}],i&&l(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,c,a}(i(n(401)).default);t.default=b},551:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={workhorseApi:"WFH-INATOR-WORKHORSE-API",loggingService:"WFH-INATOR-LOGGING-SERVICE"}},903:e=>{e.exports=require("uuid")},909:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(911)),i=f(n(133)),u=f(n(522)),c=f(n(401)),a=f(n(942));function f(e){return e&&e.__esModule?e:{default:e}}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof c?r:c,f=Object.create(a.prototype);return s(f,"_invoke",function(n,r,o){var i,c,a,f=0,l=o||[],s=!1,p={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return i=t,c=0,a=e,p.n=n,u}};function y(n,r){for(c=n,a=r,t=0;!s&&f&&!o&&t<l.length;t++){var o,i=l[t],y=p.p,v=i[2];n>3?(o=v===r)&&(a=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=y&&((o=n<2&&y<i[1])?(c=0,p.v=r,p.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return u;throw s=!0,r}return function(o,l,v){if(f>1)throw TypeError("Generator is already running");for(s&&1===l&&y(l,v),c=l,a=v;(t=c<2?e:a)||!s;){i||(c?c<3?(c>1&&(p.n=-1),y(c,a)):p.n=a:p.v=a);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(s=p.n<0)?a:n.call(r,p))!==u)break}catch(t){i=e,c=1,a=t}finally{f=1}}return{value:t,done:s}}}(n,o,i),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(s(t={},r,function(){return this}),t),y=f.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e}return a.prototype=f,s(y,"constructor",f),s(f,"constructor",a),a.displayName="GeneratorFunction",s(f,o,"GeneratorFunction"),s(y),s(y,o,"Generator"),s(y,r,function(){return this}),s(y,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:v}})()}function s(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}s=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){s(e,t,function(e){return this._invoke(t,n,e)})};i("next",0),i("throw",1),i("return",2)}},s(e,t,n,r)}function p(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){p(i,r,o,u,c,"next",e)}function c(e){p(i,r,o,u,c,"throw",e)}u(void 0)})}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}var g=function(e){function t(e,n,o,i){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=function(e,t,n){return t=d(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}(this,t,["RABBITMQ PUBLICATION SERVICE - MESSAGE: ",i])).rabbitUrl=e,u.serviceName=i,u.exchangeName=n,u.queueName=o,u.connection=null,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),n=t,c=[{key:"publish",value:(s=y(l().m(function e(t){var n,r,c,a,f,s,p=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:"undefined",r=p.length>2&&void 0!==p[2]?p[2]:o.default.DEBUG,c=p.length>3&&void 0!==p[3]?p[3]:i.default.JsonMessage,this.connection){e.n=1;break}return e.n=1,this.connect();case 1:return e.p=1,this.log("CREATING LOG MESSAGE"),a=new u.default(null,null,null,r,c,t,this.serviceName,n),f=a.toJson(),this.log("PUBLISHING MESSAGE: ",f),e.n=2,this.connect.sendToQueue(this.queueName,Buffer.from(f));case 2:this.log("SETUP PUBLICATION complete - exchange=".concat(this.exchangeName,", queue=").concat(this.queueName)),e.n=4;break;case 3:e.p=3,s=e.v,this.log("ERROR publishing to RabbitMQ:",!0,s);case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return s.apply(this,arguments)})},{key:"connect",value:(f=y(l().m(function e(){var t,n=this;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,this.log("publication attempting to start; exchange=".concat(this.exchangeName,", queue=").concat(this.queueName)),e.n=1,a.default.connect(this.rabbitUrl);case 1:return this.connection=e.v,this.log("Creating channel"),e.n=2,this.connection.createChannel().then(function(e){n.log("Asserting Queue"),e.assertQueue(n.queueName,{durable:!0},function(e){n.log("Queue Assertion "),e&&n.log("ERROR ON QUEUE",!0,e)})});case 2:e.n=4;break;case 3:e.p=3,t=e.v,this.log("ERROR connecting to RabbitMQ:",!0,t);case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return f.apply(this,arguments)})}],c&&v(n.prototype,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,c,f,s}(c.default);t.default=g},911:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={DEBUG:"35d0c091-14ca-4d5b-8a58-95c6e7e41cd3",INFO:"1754199b-4c7e-431c-91cb-ed1e21a96a45",WARNING:"7cfbd5dd-a746-40b9-b390-4bd9b31cd6df",ERROR:"1fda1a86-3c4c-443d-bd67-ba52244a6040"}},942:e=>{e.exports=require("amqplib")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=f(n(546)),o=f(n(909)),i=f(n(911)),u=f(n(133)),c=f(n(551)),a=f(n(522));function f(e){return e&&e.__esModule?e:{default:e}}e.default=function(){return{Subscription:t.default,Publication:o.default,LogLevel:i.default,LogCategory:u.default,ServiceName:c.default,LogMessage:a.default}}})(),module.exports.index=r})();